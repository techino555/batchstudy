---
<img src="/images/introduction.gif" width=90%>
---
### 閲覧上の注意
- 本資料はPCからの閲覧推奨です。
- スマートフォンからの閲覧が可能です。
- 下にスライドして進めることがあります。
- 動画が出てきますが一時停止不可です。
- スマホではスワイプでページ移動します。
---
### 目次
- バッチ（バッチファイル）とは
- バッチが活躍する場面
- 実装例 
- remとechoは書こう
- ログと実処理用のバッチファイルは分ける
- 参照資料、ツールの紹介
---
### バッチ（バッチファイル）とは  
- Wikipedia バッチファイル(抜粋)より
<p><font size="5">バッチファイル（Batch File）とは、MS-DOS、OS/2、Windowsでのコマンドプロンプト(シェル)に行わせたい命令列をテキストファイルに記述したもの。バッチファイルを実行すると、シェルプログラム(一般に COMMAND.COMやcmd.exe)がそのファイルを読み、その中のコマンドを（通常）一行ずつ実行する。</p>
<p><font size="5">バッチファイルはUNIX系オペレーティングシステムのシェルスクリプトに相当。</p>
<p><font size="5">DOSのバッチファイルの拡張子は.BATである。</p>
---
### バッチが活躍する場面
#### 大きくは下記の２つが占める
- ディスクの容量、ネットワークの情報などサーバや端末に関する情報を一度にまとめて取得するとき。
- タスクスケジューラーを使用の上、決まった時間にサーバで処理をさせたいとき。
 
 
**実装処理でよくあるのは定期再起動、バックアップ。**
---
### バッチの作成と実行手順
1. txtファイルを作成
2. 処理内容を記載
3. txtファイルの拡張子を.batに変更する
4. 実行する</br>
</br>
作成例は下のスライド@fa[arrow-circle-down fa-lg]</br>
確認しなくてよければ右に進む@fa[arrow-circle-right fa-lg]
+++
下記で特定のフォルダを一度に２つ開くバッチを作る。txtファイルを作成後、ファイル内に処理を記載していく。</br>

```
@echo off
rem 上は後述

call explorer C:\Users\hide\Desktop\HTML
timeout /t 1
call explorer C:\Users\hide\Desktop\Linux
exit /b
```

作成後拡張子をbatに変更し、ダブルクリックするとフォルダが２つ開くことを確認できる。</br>
</br>
右に進む@fa[arrow-circle-right fa-lg]
---
### remとechoは書こう
- rem</br>
実行時に反映されない純粋にコメントを記載するときに使用。</br>
- echo</br>
実行時に反映されるコメント。処理内容を簡単に表示する際に便利。</br>
</br>
- @echo offについて</br>
これを冒頭に記載しないとバッチの処理がすべてコマンドプロンプトに出力されてしまうため
記載することが基本。
　
+++
- echoを付与していない時の処理
+++
- echoを付与した時の処理
---
#### 変数の紹介  


バッチには変数を設定することができる。  


例：今日の日付を出力する変数DATE  
```
> echo %DATE%
2018/02/22  
```
変数を%と%を囲うことで定義した値を取得できる。  
下に進む@fa[arrow-circle-down fa-lg]
+++
また自分で変数を設定することもできる。  
設定例:  
```
set year=%date:~0,4%    
set month=%date:~5,2%    
set day=%date:~8,2%  
set date2=%year%%month%%day%    
```
+++
役割の紹介  

```
set year=%date:~0,4%  
```
→date変数の出力結果の1文字目から5文字までの  
4文字分の値を取得。結果は2018。  
文字のカウントは0から始める。  
```
set month=%date:~5,2%  
```
→date変数のの出力結果の6文字目から7文字までの  
2文字分の値を取得。結果は02。  


+++
```
set day=%date:~8,2%  
```
→date変数の出力結果の1文字目から5文字までの  
4文字分の値を取得。結果は22日なら22。  
```
set date2=%year%%month%%day%  
```
→それぞれ設定した変数を%で囲った形で続けて  
定義できる。この場合の結果は20180222。  
+++
```
sample2.bat
```
```
@echo off 
rem 現在のディレクトリ情報を取得する。
rem 今日の日付をログファイルに付加する。
rem 作成は石川。

set year=%date:~0,4%    
set month=%date:~5,2%    
set day=%date:~8,2%  
set date2=%year%%month%%day%    

dir > log_%date2%

exit /b 
```
---
### ログと実処理用のファイルは分ける
---
### 参照資料、ツールの紹介
---
**ありがとうございましたm(＿)m**
